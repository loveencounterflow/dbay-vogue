{
  "version": 3,
  "file": "",
  "sourceRoot": "",
  "sources": [
    "../src/vogue-server.coffee"
  ],
  "names": [],
  "mappings": "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",
  "sourcesContent": [
    "\n'use strict'\n\n\n############################################################################################################\nCND                       = require 'cnd'\nrpr                       = CND.rpr\nbadge                     = 'DBAY-VOGUE/SERVER'\ndebug                     = CND.get_logger 'debug',     badge\nwarn                      = CND.get_logger 'warn',      badge\ninfo                      = CND.get_logger 'info',      badge\nurge                      = CND.get_logger 'urge',      badge\nhelp                      = CND.get_logger 'help',      badge\nwhisper                   = CND.get_logger 'whisper',   badge\necho                      = CND.echo.bind CND\n#...........................................................................................................\n( require 'mixa/lib/check-package-versions' ) require '../pinned-package-versions.json'\nFS                        = require 'fs'\nPATH                      = require 'path'\nHTTP                      = require 'http'\nGUY                       = require 'guy'\nKoa                       = require 'koa'\nRouter                    = require '@koa/router'\n{ Server: Socket_server } = require 'socket.io'\nfile_server               = require 'koa-files'\nmount                     = require 'koa-mount'\n{ Vogue_common_mixin }    = require './vogue-common-mixin'\nH                         = require './helpers'\n{ HDML, }                 = require 'hdml'\n\n\n#===========================================================================================================\nclass @Vogue_server extends Vogue_common_mixin()\n\n  #---------------------------------------------------------------------------------------------------------\n  constructor: ( cfg ) ->\n    super()\n    @cfg        = { @defaults.vogue_server_constructor_cfg..., cfg..., }\n    @types.validate.vogue_server_constructor_cfg @cfg\n    @_add_layout()\n    @cfg        = GUY.lft.freeze @cfg\n    @hub        = H.property_pending\n    #.......................................................................................................\n    GUY.props.hide @, 'app',    new Koa()\n    GUY.props.hide @, 'router', new Router()\n    #.......................................................................................................\n    return undefined\n\n  #---------------------------------------------------------------------------------------------------------\n  _add_layout: ->\n    @cfg.layout ?= {}\n    return null if @cfg.layout.top? and @cfg.layout.bottom?\n    path    = PATH.resolve PATH.join __dirname, '../assets/layout.html'\n    layout  = FS.readFileSync path, { encoding: 'utf-8', }\n    [ layout_top\n      layout_bottom   ] = layout.split '<%content%>'\n    @cfg.layout.top    ?= layout_top\n    @cfg.layout.bottom ?= layout_bottom\n    return null\n\n  #---------------------------------------------------------------------------------------------------------\n  start: => new Promise ( resolve, reject ) =>\n    { host\n      port  } = @cfg\n    @_create_app()\n    #.......................................................................................................\n    GUY.props.hide @, 'http_server',  HTTP.createServer @app.callback()\n    GUY.props.hide @, 'io',           new Socket_server @http_server\n    #.......................................................................................................\n    @io.on 'connection', ( socket ) =>\n      help \"^dbay-vogue/server@8^ user connected to socket\"\n      return null\n    #.......................................................................................................\n    @http_server.listen { host, port, }, ->\n      debug \"^dbay-vogue/server@9^ listening\"\n      resolve { host, port, }\n    #.......................................................................................................\n    return null\n\n  #---------------------------------------------------------------------------------------------------------\n  _create_app: =>\n    ###\n    `_r_*`: managed by router\n    `_s_*`: managed by server\n    ###\n    @app.use                                          @_s_log\n    @app.use                                          @_s_layout\n    #.......................................................................................................\n    @router.get   'home',           '/',              @_r_home\n    @router.get   'trends',         '/trends',        @_r_trends\n    @router.get   'table_by_name',  '/table/:table',  @_r_table_by_name\n    #.......................................................................................................\n    @app.use @router.routes()\n    #.......................................................................................................\n    ### thx to https://stackoverflow.com/a/66377342/7568091 ###\n    debug '^4345^', @cfg.paths.public\n    debug '^4345^', @cfg.file_server\n    # @app.use mount '/favicon.ico', file_server @cfg.paths.favicon, @cfg.file_server\n    @app.use mount '/public', file_server @cfg.paths.public, @cfg.file_server\n    @app.use mount '/src',    file_server @cfg.paths.src,    @cfg.file_server\n    #.......................................................................................................\n    @app.use @_s_default\n    @app.use @router.allowedMethods()\n    return null\n\n\n  #=========================================================================================================\n  #\n  #---------------------------------------------------------------------------------------------------------\n  _s_log: ( ctx, next ) =>\n    await next()\n    querystring   = if ctx.querystring?.length > 1 then \"?#{ctx.querystring}\" else ''\n    # help \"^dbay-vogue/server@7^\", { method, url, originalUrl, origin, href, path, query, querystring, host, hostname, protocol, }\n    color = if ctx.status < 400 then 'lime' else 'red'\n    line  = \"#{ctx.method} #{ctx.origin}#{ctx.path}#{querystring} -> #{ctx.status} #{ctx.message}\"\n    echo ( CND.grey \"^dbay-vogue/server@7^\" ), ( CND[ color ] line )\n    # warn \"^dbay-vogue/server@7^\", \"#{ctx.status} #{ctx.message}\"\n    return null\n\n  #---------------------------------------------------------------------------------------------------------\n  _s_layout: ( ctx, next ) =>\n    await next()\n    if ( ctx.type is 'text/html' ) and ( not ctx.body?.startswith? \"<!DOCTYPE html>\" )\n      ctx.body = @cfg.layout.top + ctx.body + @cfg.layout.bottom\n    return null\n\n  #---------------------------------------------------------------------------------------------------------\n  _r_home: ( ctx ) =>\n    ctx.body = \"DBay Vogue App\"\n    # help \"^dbay-vogue/server@7^\", ctx.router.url 'home', { query: { foo: 'bar', }, }\n    return null\n\n  #---------------------------------------------------------------------------------------------------------\n  _r_trends: ( ctx ) =>\n    ### TAINT iterate or use stream ###\n    ### TAINT chart is per-DSK but trends table is global ###\n    R     = []\n    for { dsk, scraper, } from @hub.scrapers._XXX_walk_scrapers()\n      R.push scraper._XXX_get_details_chart { dsk, }\n      # R.push scraper._XXX_get_details_table { dsk, }\n    table = @hub_get_table_name 'trends'\n    R.push @hub.vdb.as_html { table, }\n    #.......................................................................................................\n    ctx.response.type   = 'html'\n    ctx.body            = R.join '\\n'\n    return null\n\n  #---------------------------------------------------------------------------------------------------------\n  _r_table_by_name: ( ctx ) =>\n    ### TAINT iterate or use stream ###\n    ctx.response.type   = 'html'\n    { table }           = ctx.params\n    table              ?= \"NO SUCH TABLE\"\n    #.......................................................................................................\n    ### TAINT use API call to get actual table name ###\n    { prefix }          = @hub.vdb.cfg\n    ### TAINT this functionality probably misplaced; done here for POC ###\n    table_cfgs          =\n      \"#{prefix}_trends\":\n        fields:\n          #.................................................................................................\n          dsk:\n            display: false\n          #.................................................................................................\n          ts:\n            format: ( ts ) => @hub.vdb.db.dt_format ts, 'YYYY-MM-DD HH:mm UTC'\n          #.................................................................................................\n          raw_trend:\n            title:  \"Trend\"\n            html:   ( raw_trend ) =>\n              return HDML.pair 'td.trend.sparkline', { 'data-trend': raw_trend, }\n          #.................................................................................................\n          details:\n            title:  \"Trend\"\n            html:   ( details ) =>\n              try d = JSON.parse details catch error\n                return HDML.pair 'div.error', HDML.text error.message\n              R = []\n              R.push HDML.open 'table.details'\n              for k, v of d\n                R.push HDML.open 'tr'\n                R.push HDML.pair 'th', HDML.text k\n                R.push HDML.pair 'td', HDML.text v\n                R.push HDML.close 'tr'\n              R.push HDML.close 'table'\n              return HDML.pair 'td.details', R.join ''\n    table_cfg           = table_cfgs[ table ] ? null\n    #.......................................................................................................\n    ctx.body            = \"<h1>Table #{table}</h1>\\n\" + @hub.vdb.as_html { table, table_cfg..., }\n    return null\n\n  #---------------------------------------------------------------------------------------------------------\n  _s_default: ( ctx ) =>\n    ctx.response.status = 404\n    ctx.response.type   = 'html'\n    ctx.body            = \"<h3>DBay Vogue App / 404 / Not Found</h3>\"\n    # ctx.throw 404, \"no content under #{ctx.url}\"\n    # ( ctx.state.greetings ?= [] ).push \"helo from content handler\"\n    return null\n"
  ]
}