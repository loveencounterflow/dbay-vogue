{
  "version": 3,
  "file": "",
  "sourceRoot": "",
  "sources": [
    "../src/vogue-scheduler.coffee"
  ],
  "names": [],
  "mappings": "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",
  "sourcesContent": [
    "\n'use strict'\n\n\n############################################################################################################\nCND                       = require 'cnd'\nrpr                       = CND.rpr\nbadge                     = 'DBAY-VOGUE/SCHEDULER'\ndebug                     = CND.get_logger 'debug',     badge\nwarn                      = CND.get_logger 'warn',      badge\ninfo                      = CND.get_logger 'info',      badge\nurge                      = CND.get_logger 'urge',      badge\nhelp                      = CND.get_logger 'help',      badge\nwhisper                   = CND.get_logger 'whisper',   badge\necho                      = CND.echo.bind CND\n#...........................................................................................................\n( require 'mixa/lib/check-package-versions' ) require '../pinned-package-versions.json'\nGUY                       = require 'guy'\n{ Vogue_common_mixin }    = require './vogue-common-mixin'\n#...........................................................................................................\nH                         = require './helpers'\n\n\n#===========================================================================================================\nclass @Vogue_scheduler extends Vogue_common_mixin()\n\n  #---------------------------------------------------------------------------------------------------------\n  constructor: ( cfg ) ->\n    super()\n    @cfg        = { @defaults.vogue_scheduler_constructor_cfg..., cfg..., }\n    @types.validate.vogue_scheduler_constructor_cfg @cfg\n    @cfg        = GUY.lft.freeze @cfg\n    @hub        = H.property_pending\n    @rules      = []\n    return undefined\n\n  #---------------------------------------------------------------------------------------------------------\n  start: ->\n  stop: ->\n\n  #---------------------------------------------------------------------------------------------------------\n  add_interval: ( cfg ) ->\n    cfg         = { @defaults.vogue_scheduler_add_interval_cfg..., cfg..., }\n    dayjs       = @hub.vdb.db._dayjs\n    @types.validate.vogue_scheduler_add_interval_cfg cfg\n    { callee\n      amount\n      unit    } = cfg\n    d           = { running: false, }\n    delta_t_ms  = ( dayjs.duration amount, unit ).asMilliseconds()\n    # debug '^342-1^', { delta_t_ms, }\n    #.......................................................................................................\n    g = =>\n      return null if d.running\n      #.....................................................................................................\n      d.running   = true\n      t0_ms       = Date.now()\n      #.....................................................................................................\n      return null if ( await callee() ) is false\n      #.....................................................................................................\n      d.running   = false\n      t1_ms       = Date.now()\n      run_dt_ms   = t1_ms - t0_ms\n      ### TAINT what to do when extra_dt is zero, negative? ###\n      extra_dt_ms = ( delta_t_ms - run_dt_ms )\n      extra_dt_s  = ( dayjs.duration extra_dt_ms, 'milliseconds' ).asSeconds()\n      d.ref       = @after extra_dt_s, g\n      # debug '^342-2^', { extra_dt_ms, extra_dt_s, }\n      #.....................................................................................................\n      return null\n    #.......................................................................................................\n    g()\n    return null\n\n  #=========================================================================================================\n  #\n  #---------------------------------------------------------------------------------------------------------\n  every: ( dts, f ) ->                         setInterval f,    dts * 1000\n  after: ( dts, f ) ->                         setTimeout  f,    dts * 1000\n  sleep: ( dts    ) -> new Promise ( done ) => setTimeout  done, dts * 1000\n\n\n\n"
  ]
}